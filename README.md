# 智能音频伪造检测智能体
---
一款**基于 AutoGen 框架构建**的**全流程自动化音频伪造检测工具**，专为识别 AI 生成 / TTS/ VC音频设计，集成「意图理解、多步骤检测、专业报告生成」能力，无需人工干预即可完成从音频标准化到伪造风险判定的完整流程，同时支持专业知识库问答与日常闲聊交互。

---
# **核心优势**

- 🚀 **全自动化**：严格遵循「格式转换→反伪造初检→ASR + 说话人分割→特征提取→报告生成」五步流程，工具调用**零人工介入**；
- 🎯 **精准识别 + 本地路径兼容**：基于 MFCC、梅尔能量等核心特征，结合 LibriSpeech 样本训练阈值精准**标记可疑伪造片段，同时支持自动解析本地音频绝对路径，无需手动格式转换；
- 📊 **标准化报告**：自动**生成包含可疑片段详情、ASR 语音内容、风险等级（低 / 中 / 高）的结构化报告**，支持追溯原始检测数据；
- 💬 **多意图 + 多轮记忆**：兼容检测指令、音频专业知识问答（如 MFCC 原理）、日常闲聊，且**具备多轮对话记忆**，无需重复输入历史指令或路径；
- 🛡️ **稳定可靠**：**支持任何格式的音频文件**，内置参数校验、异常捕获、状态重置机制，禁用 Docker 依赖，**适配 Windows 路径规范**，部署门槛低。
---
# 流水线

---
# 使用步骤
---
## 依赖安装
```
#克隆仓库
git clone https://github.com/mrdoge4real/AudioDeepfakeDetectionAgent.git

cd AudioDeepfakeDetectionAgent

#安装虚拟环境和依赖
conda create -n antiagent python=3.9

conda activate antiagent

pip install -r requirements.txt
```
## 填写API
```
# 在.env中填写API，我们在测试时分别使用了DeepSeek-reasoner和Qwen-max

BASE_DIR=#此处填本地仓库地址

HF_TOKEN=#由于要使用ASR工具，此处填HuggingFace

LLM_API_KEY=# 替换成你自己DeepSeek API Key

LLM_API_BASE=

LLM_MODEL=deepseek-reasoner
```
## 进行检测
```
python main.py
```

---
# 效果

## 检测

1. 输入本地需要检测音频的绝对路径,以下为示范

```
================================================================================
🎙️ 智能音频伪造检测助手（支持专业问答+闲聊）
================================================================================
✅ 我能做：
  1. 检测音频是否被伪造（格式：检测 + 音频绝对路径）
  2. 解答专业问题（比如：MFCC是什么？异常值怎么判定？）
  3. 日常闲聊（打招呼、简单问答）
🚪 退出指令：exit/退出/拜拜
================================================================================

请输入你的指令： /AudioDeepfakeDetectionAgent/uploads/xxxx.flac
```

2. 检测结果：
```
================================================================================
🎯 最终检测报告：
================================================================================
### 音频伪造检测总结报告

**【可疑片段数量】**
1个。

**【可疑片段时间段】**
- 第1段：0.0s - 2.7s。

**【ASR语音内容】**
What‘s the point in coming here to sit in the stand and watch the test matches?

**【风险等级+异常特征】**
存在伪造风险。核心异常特征为：梅尔能量均值(-43.2dB)偏高（正常≤-43.5002dB）。

流程结束
=========
```
---
## 闲聊和询问专业知识

效果展示
```
请输入你的指令：你好

🤖 你好😊！我是智能音频伪造检测助手～
✅ 我能帮你检测音频是否被伪造，也能解答MFCC、异常值判定等专业问题
📌 输入示例：
- 检测 E:/xxx.flac
- MFCC是什么？
- 异常值怎么样就算伪造？
```

```
请输入你的指令：今天天气怎么样


🤖 今天天气嘛，我可没法实时感知哦！😊 作为专注于音频伪造检测的助手，我的“视野”主要在声音特征分析这块儿。

你可以轻松地用手机上的天气应用，或者直接搜“天气”来查看实时预报，这样会更准确。希望你有晴朗愉快的一天！如果对音频检测有任何好奇，随时可以问我～ 🌤️
```

```
请输入你的指令：伪造音频要如何鉴别

🤖 鉴别伪造音频，我们的系统主要靠“抓特征”和“看异常”两大手段。简单来说，**就像验钞机识别假币的防伪点一样**，我们会分析声 音里那些AI伪造容易露馅的痕迹。

**主要技术手段：**
1. **抓MFCC特征**
   - 真实人声的MFCC特征（一种模拟人耳听感的特征）分布很自然，而AI伪造的声音常会出现**均值绝对值超过0.5**、**整体标准差超过35**等异常波动。

2. **查梅尔能量断层**
   - 真实音频在不同频段的能量分布是平滑的，伪造音频则可能在某个频段突然**飙高或骤降**（比如超出正常范围 -65.9 ~ -43.5） 。

**如何判断？——看异常点**
我们会用一套统计阈值（基于大量真实音频总结的）来扫描：
- 如果某个语音片段同时触发**≥2个异常条件**（比如MFCC均值异常+能量断层），就标记为“可疑片段”。
- 当整段音频中**可疑片段占比 > 10%**，就会判定为“**存在伪造嫌疑**”。

**最后给你的结论：**
我们会根据异常片段的数量和比例，给出风险等级：
- **低风险**：没发现异常，声音特征都很自然。
- **中等风险**：零星异常（≤10%可疑片段），建议进一步核查。
- **高风险**：异常片段多或集中，很可能经过伪造或AI生成。

总之，鉴别靠的是**综合比对多个声学特征**，而不是单一指标。如果你有具体音频需要检测，我们可以走完整流程（标准化→分割→特征提取→异常判定）帮你分析～ 🎧
```
---
# 音频伪造检测性能
---
我们以ASVSpoof2019LA-dev作为我们的测试集进行性能测试，测试结果如下：

| 准确率 | 精确率 | 召回率 | F1值 |
| :------- | :------- | :------- | :------- | 
| 0.7587 | 0.8811 | 0.8452 | 0.8628 |

---
# 备注

我们进行MFCC和梅尔谱图对比的阈值**基于Lbrispeech统计**。
